{% extends 'users/base.html' %}
{% load static %}

{% block title %}
<title>Список книг</title>
{% endblock title %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/main.css' %}">
{% endblock css %}

{% block content %}
<h1 class="text-center">Список книг</h1>
<div>
    <table class="table table-hover table-bordered table-sm align-middle">
        <thead class="table-secondary">
        <th class="text-center align-bottom">Автор</th>
        <th class="text-center align-bottom">Название книги</th>
        <th class="text-center align-bottom">Статус книги</th>
        <th class="text-center align-bottom">Пользователь</th>
        <th class="text-center align-bottom">Краткое описание книги</th>
        </thead>
        <tbody>
        {% for book in books %}
        <tr class="table-row-link" data-href="{{ book.get_absolute_url }}">
            <td>{{ book.author }}</td>
            <td>{{ book.title }}</td>
            <td style="text-align: center">{{ book.status }}</td>
            <td style="text-align: center">{{ user }}</td>
            <td>{{ book.description|truncatewords:20 }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const tableRows = document.querySelectorAll('.table-row-link');
        tableRows.forEach((row) => {
            row.addEventListener('click', function () {
                const href = this.getAttribute('data-href');
                if (href) {
                    window.location.href = href;
                }
            });
        });
    });
</script>
{% endblock content %}